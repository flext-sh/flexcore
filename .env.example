# FlexCore Environment Configuration
# Copy to .env and customize for your environment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application mode (development, production, test)
APP_ENV=development

# Application name and version
APP_NAME=flexcore
APP_VERSION=dev

# Debug mode (true/false)
DEBUG=true

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Server configuration
HOST=0.0.0.0
PORT=3001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary database URL
DATABASE_URL=postgres://windmill:changeme@localhost:5432/windmill

# Connection pool settings
DB_MAX_CONNECTIONS=10
DB_MAX_IDLE_CONNECTIONS=5
DB_MAX_LIFETIME=300s

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis URL for caching and sessions
REDIS_URL=redis://localhost:6379

# Redis connection settings
REDIS_POOL_SIZE=10
REDIS_IDLE_TIMEOUT=300s

# =============================================================================
# WINDMILL INTEGRATION
# =============================================================================

# Windmill API base URL
WINDMILL_BASE_URL=http://localhost:8000

# Windmill API authentication
WINDMILL_API_TOKEN=

# Worker configuration
WINDMILL_WORKER_GROUPS=default
WINDMILL_WORKERS=2

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================

# Build mode (dev, release)
BUILD_MODE=dev

# Rust/Cargo settings
CARGO_INCREMENTAL=1
RUST_LOG=info
SQLX_OFFLINE=true

# Go build settings
CGO_ENABLED=0
GOOS=linux
GOARCH=amd64

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================

# Make parallel jobs
MAKEFLAGS=-j$(nproc)

# Development mode flags
FLEXCORE_DEV_MODE=1
WINDMILL_DEV_MODE=1

# Hot reload settings
WATCH_FILES=true
RELOAD_ON_CHANGE=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test database
TEST_DATABASE_URL=postgres://windmill_test:test_password@localhost:5432/windmill_test

# Test services
TEST_REDIS_URL=redis://localhost:6379/1
TEST_WINDMILL_URL=http://localhost:8000
TEST_FLEXCORE_URL=http://localhost:3001

# Test mode flags
FLEXCORE_TEST_MODE=1
WINDMILL_TEST_MODE=1

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090

# Distributed tracing
ENABLE_TRACING=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Health checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT configuration
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRATION=24h

# API security
API_RATE_LIMIT=100
API_BURST_LIMIT=200

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email service (optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=

# Object storage (optional)
S3_BUCKET=
S3_REGION=
S3_ACCESS_KEY=
S3_SECRET_KEY=

# Message queue (optional)
MESSAGE_QUEUE_URL=

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker image settings
DOCKER_REGISTRY=
DOCKER_NAMESPACE=flexcore
DOCKER_TAG=latest

# Docker resource limits
DOCKER_MEMORY_LIMIT=1g
DOCKER_CPU_LIMIT=1.0

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Worker configuration
WORKER_CONCURRENCY=4
WORKER_TIMEOUT=300s

# Cache settings
CACHE_TTL=300s
CACHE_MAX_SIZE=100MB

# Connection timeouts
HTTP_TIMEOUT=30s
DB_TIMEOUT=10s
REDIS_TIMEOUT=5s

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment and modify these for local development

# Local database for development
# DATABASE_URL=postgres://postgres:postgres@localhost:5433/flexcore_dev

# Local Redis for development
# REDIS_URL=redis://localhost:6380

# Local Windmill for development
# WINDMILL_BASE_URL=http://localhost:8001

# Debug logging for development
# LOG_LEVEL=debug
# RUST_LOG=debug

# Disable certain features for development
# ENABLE_METRICS=false
# ENABLE_TRACING=false